"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.prepareSubcommand = exports.prepareCommand = void 0;
const metadata_1 = require("../metadata");
const index_1 = require("../models/index");
function prepareCommand(target, propertyKey) {
    let argList = '';
    if (Reflect.hasMetadata(metadata_1.ArgsMetadata, target, propertyKey)) {
        const args = Reflect.getMetadata(metadata_1.ArgsMetadata, target, propertyKey);
        const predicate = (arg) => arg instanceof index_1.VariadicArg;
        const variadic = args.find(predicate);
        if (variadic && (args.findIndex(predicate) !== (args.length - 1))) {
            throw new TypeError(`Variadic argument must be specified last the argument list of the ${String(propertyKey)}() function.`);
        }
        argList = args
            .map((arg) => {
            return arg.toString();
        })
            .join(' ')
            .replace(/^(.)/, '$1');
    }
    return `${argList}`;
}
exports.prepareCommand = prepareCommand;
function prepareSubcommand(target, propertyKey) {
    const argList = prepareCommand(target, propertyKey);
    return `${String(propertyKey)} ${argList}`;
}
exports.prepareSubcommand = prepareSubcommand;
//# sourceMappingURL=prepare-command.js.map